var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,o=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&i(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&i(e,r,t[r]);return e},s=(e,n)=>t(e,r(n));import{u,r as m,a as c,R as p,b as d}from"./vendor.639ae5be.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function f(e,t=0){return Array.isArray(e)?f(e[0],t+1):t}class h{constructor(e){this.data=e}get order(){return f(this.data)}get sum(){let e=0;return this.map((t=>(e+=t,0))),e}scalarMult(e){return this.map((t=>t*e))}mult(e){return this.map((t=>e.scalarMult(t).data))}add(e){return this.map(((t,r)=>t+e.get(r)))}contraction(e){const t=new h(this.order-2>0?[]:0);return this.map(((r,n)=>{var l;if(n.filter(((t,r)=>e.includes(r))).every(((e,t,r)=>e===r[0]))){const a=n.filter(((t,r)=>!e.includes(r))),i=null!=(l=t.get(a))?l:0;t.set(a,i+r)}return 0})),t}map(e){return new h(this.mapData(this.data,e,[]))}mapAny(e){return this.mapData(this.data,e,[])}mapData(e,t,r){return"number"==typeof e?t(e,r):e.map(((e,n)=>this.mapData(e,t,r.concat(n))))}get(e){return function(e,t){let r=e;for(const n of t)if(r=r[n],void 0===r)return;return r}(this.data,e)}set(e,t){this.data=function(e,t,r){if(0===t.length)return r;if("number"==typeof e&&0!==t.length)throw new Error("У числа не может быть индекса");const n=JSON.parse(JSON.stringify(e));let l=n;for(let a=0;a<t.length;a++){const e=t[a];e in l||(l[e]=[]),a+1!==t.length?l=l[e]:l[e]=r}return n}(this.data,e,t)}}const b={1:["11"],2:["22"],3:["33"],4:["23","32"],5:["31","13"],6:["12","21"]},y=e=>{const t=e.length,r=e[0].length,n=new h([[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]]]);for(let l=0;l<t;l++)for(let t=0;t<r;t++){const r=e[l][t],a=b[l+1],i=b[t+1],o=[];for(const e of a)for(const t of i)o.push(e+t);for(const e of o){const t=e.split("").map((e=>Number(e)-1));n.set(t,r)}}return n};const E=(e,t)=>{const r=[[0,0,0],[0,0,0],[0,0,t]],n=e.p*e.V_s**2,l=e.p*e.v_p**2,a=l-2*n,i=[[l,a,a,0,0,0],[a,l,a,0,0,0],[a,a,l,0,0,0],[0,0,0,n,0,0],[0,0,0,0,n,0],[0,0,0,0,0,n]],o=e.share,s=1-o,u=a+2/3*n,m=n,c=m+s/((0-m)**-1+2*o*(u+2*m)/(5*m*(u+4/3*m))),p=u+s/((e.p-u)**-1+o*(u+4/3*m)**-1)-2/3*c,d=p+2*c,f=[[d,p,p,0,0,0],[p,d,p,0,0,0],[p,p,d,0,0,0],[0,0,0,c,0,0],[0,0,0,0,c,0],[0,0,0,0,0,c]],h=function(e){for(var t,r=e.length,n=[],l=0;l<r;l++)n[l]=[];for(l=0;l<r;l++)for(var a=0;a<r;a++)n[l][a]=0,l==a&&(n[l][a]=1);for(var i=0;i<r;i++){for(t=e[i][i],a=0;a<r;a++)e[i][a]/=t,n[i][a]/=t;for(l=i+1;l<r;l++)for(t=e[l][i],a=0;a<r;a++)e[l][a]-=e[i][a]*t,n[l][a]-=n[i][a]*t}for(i=r-1;i>0;i--)for(l=i-1;l>=0;l--)for(t=e[l][i],a=0;a<r;a++)e[l][a]-=e[i][a]*t,n[l][a]-=n[i][a]*t;for(l=0;l<r;l++)for(a=0;a<r;a++)e[l][a]=n[l][a];return e}(f),b=JSON.parse(JSON.stringify(h)),E=[3,4,5];for(let y=0;y<f.length;y++)for(let e=0;e<f[0].length;e++)E.includes(y)!==E.includes(e)?b[y][e]*=2:E.includes(y)&&E.includes(e)&&(b[y][e]*=4);const g=y(i),v=y(h),w=v.map(((e,t)=>{const n=t.slice(2),l=n[0],a=n[1];return e*r[l][a]})).contraction([2,3]),A=g.map(((e,t)=>{const r=t.slice(2);return e*w.get(r)})).contraction([2,3]),V=A.get([2,2]);return console.log({lambda:a,lambda_mwp:p,mu:n,mu_mwp:c,mu1:m,mu2:0,C_t:g,C_mwp:f,S_t:v,sigma_m:A}),V},g=[["Кварц",4.1,6.08],["Ортоклаз",5.9,3.08],["Альбит",6.06,3.35],["Анортит",6.57,3.55],["Кальцит",6.66,3.59],["Доломит",3.5,6.3],["Биотит",5.13,2.98],["Мусковит",3.36,5.81],["Рог. обманка",7.21,4],["Эпидот",7.42,4.25],["Диопсид",7.8,4.39],["Оливин",8.2,4.82],["Альмандин",5.25,8.51],["Корунд",10.85,6.37],["Магнетит",7.4,4.2],["Гематит",5.7,4.32],["Галенит",3.77,2.08],["Молибденит",1.85,3.9],["Сфалерит",2.56,5.31],["Пирит",7.9,5.06]].map((e=>({name:e[0],V_s:1e3*e[1],v_p:1e3*e[2],p:10**5,share:1,hardness:55e6})));class v{constructor(e,t,r){this.m=e,this.a=t,this.b=r}add(e){const t=v.normalize(e);return new v(this.m+t.m,this.a+t.a,this.b+t.b)}sub(e){const t=v.normalize(e);return new v(this.m-t.m,this.a+t.b,t.a+this.b)}mult(e){const t=v.normalize(e),{m:r,a:n,b:l}=this,{m:a,a:i,b:o}=t;if(r>0&&a>0)return new v(r*a,r*i+a*n-n*i,r*o+a*l-l*o);if(r>0&&a<0)return new v(r*a,r*i-a*l-i*l,r*o-a*n-n*o);if(r<0&&a>0)return new v(r*a,-r*o+a*n+n*o,-r*i+a*l-i*l);throw new Error("Unknown branch in sparse mult")}div(e){const t=v.normalize(e),{m:r,a:n,b:l}=this,{m:a,a:i,b:o}=t;if(r>0&&a>0)return new v(r/a,(r*o+a*n)/(a*(a+o)),(r*i+a*l)/(a*(a-i)));if(r>0&&a<0)return new v(r/a,(r*o-a*l)/(a*(a+o)),(r*i-a*n)/(a*(a-i)));if(r<0&&a>0)return new v(r/a,(-r*i+a*n)/(a*(a-i)),(-r*o+a*l)/(a*(a+o)));if(r<0&&a<0)return new v(r/a,(-r*i-a*l)/(a*(a-i)),(-r*o-a*n)/(a*(a+o)));throw new Error(`Unknown branch in sparse div m1: ${r} m2: ${a}`)}toArray(){return[this.m,this.a,this.b]}static normalize(e){return"number"==typeof e?w(e):e}}const w=(e,t=0,r=0)=>new v(e,t,r),A=e=>{for(const[t,r]of Object.entries(e))if("object"==typeof r)A(r);else if("string"==typeof r&&/\d+(\.\d+)?/.test(r))e[t]=Number(r);else if("number"!=typeof r)throw new Error(`Unkown stuff ${t} ${r}`)},V=new Intl.RelativeTimeFormat("ru",{numeric:"auto",style:"long"});function _(){const{register:e,handleSubmit:t,control:r,setValue:n}=u(),[l,a]=m.exports.useState(),{fields:i,append:d,remove:f}=c({control:r,name:"minerals"});return p.createElement(p.Fragment,null,p.createElement("header",null,p.createElement("h1",null,"Лабораторная работа №4"),p.createElement("h2",null,"Выполнил студент группы БИСТ-18-1 ",p.createElement("strong",null,"Минасян Леон"))),p.createElement("main",{style:{maxWidth:900,margin:"auto"}},p.createElement("p",null,"Промежуточные результаты логируются в консоль браузера"),p.createElement("form",{onSubmit:t((e=>{A(e);const t=(e=>{let t=e.map((e=>e.hardness)).reduce(((e,t)=>Math.max(e,t)),0);const r=t=>e.map((e=>[e.hardness,E(e,t)])).some((([e,t])=>e>t));let n=0,l=0;for(;r(t)&&l<1e3;)l++,n=t,t*=2;let a=t,i=0,o=-1,s=!1;for(;n<a&&i<12;)i++,o=n/2+a/2,s=r(o),s?n=o:a=o;return s?a:o})(e.minerals),r=(e=>{const t=w(...e.speed);return w(...e.depth).div(t)})({speed:(e=>{const t=w(...e.hitEnergy),r=w(...e.hitFrequency),n=e.errAngle[0],l=e.enterAngle[0],a=w(...e.diameter),i=w(...e.hardness);return w(2e-6).mult(t).mult(r).mult(4).mult(Math.tan(l/2)).div(Math.PI).div(a).div(a).div(Math.tan(n/2)+.5).div(i).div(1.25)})({hardness:w(t).toArray(),diameter:w(e.diameter).toArray(),enterAngle:w(e.enterAngle).toArray(),errAngle:w(e.errAngle).toArray(),hitEnergy:w(e.hitEnergy,e.hitEnergyLeft,e.hitEnergyRight).toArray(),hitFrequency:w(e.hitFrequency).toArray()}).toArray(),depth:[e.depth,0,0]});a(r.div(3600))})),style:{display:"inline-block"}},p.createElement("div",{style:{display:"flex",gap:"1em",marginBottom:"1em",flexWrap:"wrap"}},i.map(((t,r)=>p.createElement("div",{key:t.id,style:{display:"flex",flexDirection:"column",padding:"0.5em",border:"1px solid lightgray",borderRadius:"0.5em",position:"relative"}},p.createElement("button",{style:{position:"absolute",top:"0.5em",right:"0.5em"},onClick:()=>f(r)},"x"),p.createElement("label",null,"Пресет",p.createElement("br",null),p.createElement("select",{name:"preset",onChange:e=>{const t=g.find((t=>t.name===e.currentTarget.value));if(!t)throw new Error("No preset mineral found");n(`minerals.${r}.v_p`,t.v_p),n(`minerals.${r}.V_s`,t.V_s)},defaultValue:""},p.createElement("option",{value:"",disabled:!0},"Выберите минерал"),g.map((e=>p.createElement("option",{key:e.name},e.name))))),p.createElement("label",null,"v_p",p.createElement("br",null),p.createElement("input",s(o({},e(`minerals.${r}.v_p`)),{type:"number",step:"any",required:!0}))),p.createElement("label",null,"V_s",p.createElement("br",null),p.createElement("input",s(o({},e(`minerals.${r}.V_s`)),{type:"number",step:"any",required:!0}))),p.createElement("label",null,"Доля породы (f1) (0-1)",p.createElement("br",null),p.createElement("input",s(o({},e(`minerals.${r}.share`)),{type:"number",step:"0.00001",required:!0,min:0,max:1,defaultValue:g[0].share}))),p.createElement("label",null,"Давление газов (p) (Па)",p.createElement("br",null),p.createElement("input",s(o({},e(`minerals.${r}.p`)),{type:"number",step:"any",required:!0,defaultValue:g[0].p}))),p.createElement("label",null,"Предел прочности (Па)",p.createElement("br",null),p.createElement("input",s(o({},e(`minerals.${r}.hardness`)),{type:"number",step:"any",required:!0,defaultValue:g[0].hardness}))))))),p.createElement("button",{onClick:()=>d({})},"Добавить минерал"),p.createElement("br",null),p.createElement("div",{style:{border:"1px solid lightgray",borderRadius:"0.5em",padding:"0.5em"}},p.createElement("label",null,"Энергия удара (Дж)",p.createElement("br",null),p.createElement("input",s(o({},e("hitEnergy")),{type:"number",step:"any",defaultValue:1e6}))),"left:"," ",p.createElement("input",s(o({},e("hitEnergyLeft")),{type:"number",step:"any",defaultValue:0})),"right:"," ",p.createElement("input",s(o({},e("hitEnergyRight")),{type:"number",step:"any",defaultValue:0}))),p.createElement("label",null,"Частота ударов (в сек)",p.createElement("br",null),p.createElement("input",s(o({},e("hitFrequency")),{type:"number",step:"any",defaultValue:15}))),p.createElement("label",null,"Угол вхождения (рад)",p.createElement("br",null),p.createElement("input",s(o({},e("enterAngle")),{type:"number",step:"any",defaultValue:1.57}))),p.createElement("label",null,"Угол отклонения (рад)",p.createElement("br",null),p.createElement("input",s(o({},e("errAngle")),{type:"number",step:"any",defaultValue:0}))),p.createElement("label",null,"Диаметр долота (м)",p.createElement("br",null),p.createElement("input",s(o({},e("diameter")),{type:"number",step:"any",defaultValue:.2}))),p.createElement("label",null,"Глубина бурения (м)",p.createElement("br",null),p.createElement("input",s(o({},e("depth")),{type:"number",step:"any",defaultValue:10}))),p.createElement("br",null),p.createElement("br",null),p.createElement("br",null),p.createElement("input",{type:"submit"})),l&&p.createElement("div",null,"Бурение выполнится ",V.format(Math.trunc(l.m),"hour"),"(L: ",l.a.toPrecision(3),"R: ",l.b.toPrecision(3),")")))}d.render(p.createElement(p.StrictMode,null,p.createElement(_,null)),document.getElementById("root"));
